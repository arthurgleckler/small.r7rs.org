
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Copyright 2013 by Arthur A. Gleckler. All rights reserved. -->
    <title>Source for wiki VectorsCowan version 21</title>
    <link href="/trac.css" rel="stylesheet" type="text/css"></head>
  <body>
    <header>This site is a static rendering of the <a href="https://trac.edgewall.org/">Trac</a> instance that was used by <a href="http://scheme-reports.org/2015/working-group-1.html">R7RS-WG1</a> for its work on R7RS-small (<a href="/attachment/r7rs.pdf">PDF</a>), which was ratified in 2013. For more information, see <a href="/">Home</a>.</header>
    <ul class="navigation">
      <li><a href="/">Home</a></li>
      <li><a href="/ticket/">All tickets</a></li>
      <li><a href="/wiki/">All wiki pages</a></li></ul>
    <h1>Source for wiki VectorsCowan version 21</h1>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>comment</h2>
    <pre></pre>
    <h2>ipnr</h2>
    <pre>127.11.51.1</pre>
    <h2>name</h2>
    <pre>VectorsCowan</pre>
    <h2>readonly</h2>
    <pre>0</pre>
    <h2>text</h2>
    <pre>Some cleanup is needed to [http://srfi.schemers.org/srfi-43/srfi-43.html SRFI 43].

== R7RS vs. SRFI 43 ==

The R7RS procedures `vector-map` and `vector-for-each` are incompatible with SRFI 43; they do not pass the current index, but only the values.  This proposal modifies SRFI 43 to eliminate the problem:

 * `vector-fold`, `vector-fold-right`, `vector-reduce`, `vector-reduce-right`, `vector-map`, `vector-map!`, `vector-for-each` are the R7RS-compatible versions that don't transmit index values to their procedure arguments.

 * `vector-fold/index`, `vector-fold-right/index`, `vector-map/index`, `vector-map!/index`, `vector-for-each/index` do transmit index values, and are compatible with SRFI 43 conceptually but not in name.

== Extensions ==

Here are some additional vector procedures that might be Good Things if we are going to break SRFI 43 anyway.  Some are from Python, some from other sources.

=== Partitioning ===

`(vector-partition `''pred vector''`)`

Returns two values.  The first value is a newly allocated vector of the same length as ''vector'', reordered so that the elements which satisfy ''pred'' appear in the first ''n'' elements of the vector, and the elements which do not satisfy ''pred'' appear in the remaining elements.  The second value is a vector index ''n'' which is the index of the first element not satisfying ''pred''.  The ordering of the elements is preserved in all other respects .  ''Pred'' may be called any number of times and in any order.

`(vector-partition! `''pred vector''`)`

The same as `vector-partition`, except that it mutates ''vector'' and returns only ''n''.


=== Appending ===

`(vector-append-subvectors `( ''vector start end'' ) ...`)`

Returns a vector that contains every element of each ''vector'' from ''start'' to ''end'' in the specified order.  This procedure is a generalization of `vector-copy`.

`(vector-copy-subvectors! `''result'' ( ''at vector start end'' ) ...`)`

Copies every element of each ''vector'' from ''start'' to ''end'' into the vector ''result'', starting at ''at''.  The source vectors are copied in the specified order.  This procedure is a generalization of `vector-copy!`.

=== Cumulation ===

`(vector-cumulate `''proc seed vector''`)`

Returns a newly allocated vector of the same length as ''vector''.  Each element is constructed by reducing (as if by `vector-reduce`) successive prefixes of the elements of ''vector''. (APL scan.)

</pre>
    <h2>time</h2>
    <pre>2015-12-13 11:55:11</pre>
    <h2>version</h2>
    <pre>21</pre></body></html>