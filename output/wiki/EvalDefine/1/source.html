
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Copyright 2013 by Arthur A. Gleckler. All rights reserved. -->
    <title>Source for wiki EvalDefine version 1</title>
    <link href="/trac.css" rel="stylesheet" type="text/css"></head>
  <body>
    <header>This site is a static rendering of the <a href="https://trac.edgewall.org/">Trac</a> instance that was used by <a href="http://scheme-reports.org/2015/working-group-1.html">R7RS-WG1</a> for its work on R7RS-small (<a href="/attachment/r7rs.pdf">PDF</a>), which was ratified in 2013. For more information, see <a href="/">Home</a>.</header>
    <ul class="navigation">
      <li><a href="/">Home</a></li>
      <li><a href="/ticket/">All tickets</a></li>
      <li><a href="/wiki/">All wiki pages</a></li></ul>
    <h1>Source for wiki EvalDefine version 1</h1>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>comment</h2>
    <pre></pre>
    <h2>ipnr</h2>
    <pre>198.185.18.207</pre>
    <h2>name</h2>
    <pre>EvalDefine</pre>
    <h2>readonly</h2>
    <pre>0</pre>
    <h2>text</h2>
    <pre>R5RS does not require `eval` to accept definitions.  It also requires a second argument specifying the evaluation environment; invoking `(interaction-environment)` returns an environment object that represents the REPL environment.  I ran tests on the suite of Schemes to see what was supported where.





runallschemes define eval
****************************************************************************
*                                                                          *
*                                                                          *
*                                                                          *
*                                                                          *
*                                                                          *
*                              RUN ALL SCHEMES                             *
*                              define eval
*                                                                          *
*                                                                          *
*                                                                          *
*                                                                          *
*                                                                          *
****************************************************************************
===== RACKET =====
Welcome to Racket v5.1.3.
&gt; (eval '(define x 32) (interaction-environment)) x (eval '(define y 55)) y
reference to undefined identifier: interaction-environment

 === context ===
/usr/local/lib/racket/collects/racket/private/misc.rkt:85:7

&gt; reference to undefined identifier: x

 === context ===
/usr/local/lib/racket/collects/racket/private/misc.rkt:85:7

&gt; &gt; 55
&gt; 
===== GAUCHE =====
gosh&gt; (eval '(define x 32) (interaction-environment)) x (eval '(define y 55)) y
x
gosh&gt; 32
gosh&gt; *** ERROR: wrong number of arguments for #&lt;subr eval&gt; (required 2, got 1)
Stack Trace:
_______________________________________
gosh&gt; *** ERROR: unbound variable: y
Stack Trace:
_______________________________________
gosh&gt; ===== MIT =====
MIT/GNU Scheme running under GNU/Linux
Type `^C' (control-C) followed by `H' to obtain information about interrupts.

Copyright (C) 2011 Massachusetts Institute of Technology
This is free software; see the source for copying conditions. There is NO warranty; not even for
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Image saved on Thursday March 1, 2012 at 1:27:49 AM
  Release 9.1.1 || Microcode 15.3 || Runtime 15.7 || SF 4.41 || LIAR/i386 4.118 || Edwin 3.116

1 ]=&gt; (eval '(define x 32) (interaction-environment)) x (eval '(define y 55)) y

;Unbound variable: interaction-environment
;To continue, call RESTART with an option number:
; (RESTART 3) =&gt; Specify a value to use instead of interaction-environment.
; (RESTART 2) =&gt; Define interaction-environment to a given value.
; (RESTART 1) =&gt; Return to read-eval-print level 1.

2 error&gt; 
;Unbound variable: x
;To continue, call RESTART with an option number:
; (RESTART 4) =&gt; Specify a value to use instead of x.
; (RESTART 3) =&gt; Define x to a given value.
; (RESTART 2) =&gt; Return to read-eval-print level 2.
; (RESTART 1) =&gt; Return to read-eval-print level 1.

3 error&gt; 
;The procedure #[compiled-procedure 11 (&quot;global&quot; #x35) #xf #x2d0dbf] has been called with 1 argument; it requires exactly 2 arguments.
;To continue, call RESTART with an option number:
; (RESTART 3) =&gt; Return to read-eval-print level 3.
; (RESTART 2) =&gt; Return to read-eval-print level 2.
; (RESTART 1) =&gt; Return to read-eval-print level 1.
</pre>
    <h2>time</h2>
    <pre>2012-06-26 06:46:29</pre>
    <h2>version</h2>
    <pre>1</pre></body></html>