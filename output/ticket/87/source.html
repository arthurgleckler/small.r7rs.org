
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Copyright 2013 by Arthur A. Gleckler. All rights reserved. -->
    <title>Source for ticket #87</title>
    <link href="/trac.css" rel="stylesheet" type="text/css"></head>
  <body>
    <header>This site is a static rendering of the <a href="https://trac.edgewall.org/">Trac</a> instance that was used by <a href="http://scheme-reports.org/2015/working-group-1.html">R7RS-WG1</a> for its work on R7RS-small (<a href="/attachment/r7rs.pdf">PDF</a>), which was ratified in 2013. For more information, see <a href="/">Home</a>.</header>
    <ul class="navigation">
      <li><a href="/">Home</a></li>
      <li><a href="/ticket/">All tickets</a></li>
      <li><a href="/wiki/">All wiki pages</a></li></ul>
    <h1>Source for ticket #87</h1>
    <h2>cc</h2>
    <pre></pre>
    <h2>changetime</h2>
    <pre>2011-01-24 06:47:32</pre>
    <h2>component</h2>
    <pre>WG1 - Core</pre>
    <h2>description</h2>
    <pre>In R5RS and R6RS, `call-with-values` takes two arguments, both procedures.  The first is a ''producer'' of multiple values; the second is a ''consumer'', to which the multiple values returned by ''producer'' are passed as arguments.

I propose allowing multiple ''producer'' arguments.  This gives `call-with-values` the same power as Common Lisp `multiple-value-call`.</pre>
    <h2>id</h2>
    <pre>87</pre>
    <h2>keywords</h2>
    <pre></pre>
    <h2>milestone</h2>
    <pre></pre>
    <h2>owner</h2>
    <pre>alexshinn</pre>
    <h2>priority</h2>
    <pre>major</pre>
    <h2>reporter</h2>
    <pre>cowan</pre>
    <h2>resolution</h2>
    <pre>wontfix</pre>
    <h2>severity</h2>
    <pre></pre>
    <h2>status</h2>
    <pre>closed</pre>
    <h2>summary</h2>
    <pre>Allow multiple producers in `call-with-values`</pre>
    <h2>time</h2>
    <pre>2010-10-18 11:33:51</pre>
    <h2>type</h2>
    <pre>defect</pre>
    <h1>Changes</h1>
    <h2>Change at time 2011-01-24 06:47:32</h2>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>field</h2>
    <pre>comment</pre>
    <h2>newvalue</h2>
    <pre>WG1 voted to reject multiple producers.</pre>
    <h2>oldvalue</h2>
    <pre>2</pre>
    <h2>raw-time</h2>
    <pre>1295822852000000</pre>
    <h2>ticket</h2>
    <pre>87</pre>
    <h2>time</h2>
    <pre>2011-01-24 06:47:32</pre>
    <h2>Change at time 2011-01-24 06:47:32</h2>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>field</h2>
    <pre>resolution</pre>
    <h2>newvalue</h2>
    <pre>wontfix</pre>
    <h2>oldvalue</h2>
    <pre></pre>
    <h2>raw-time</h2>
    <pre>1295822852000000</pre>
    <h2>ticket</h2>
    <pre>87</pre>
    <h2>time</h2>
    <pre>2011-01-24 06:47:32</pre>
    <h2>Change at time 2011-01-24 06:47:32</h2>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>field</h2>
    <pre>status</pre>
    <h2>newvalue</h2>
    <pre>closed</pre>
    <h2>oldvalue</h2>
    <pre>new</pre>
    <h2>raw-time</h2>
    <pre>1295822852000000</pre>
    <h2>ticket</h2>
    <pre>87</pre>
    <h2>time</h2>
    <pre>2011-01-24 06:47:32</pre>
    <h2>Change at time 2010-10-18 11:42:10</h2>
    <h2>author</h2>
    <pre>cowan</pre>
    <h2>field</h2>
    <pre>comment</pre>
    <h2>newvalue</h2>
    <pre>As an example, imagine an implementation of (physical) vectors, called ''vecs'', using multiple values.  To create a vec, we use `make-vec`, defined thus:

{{{
(define (make-vec x y z) (values x y z))
}}}

Then we can add vecs as follows:

{{{
(define (vec+ x1 y1 z1 x2 y2 z2)
  (make-vec (+ x1 y1) (+ x2 y2) (+ x3 y3)))

(define-syntax vecplus ()
  (syntax-rules
    ((vecplus a b) (call-with-values a b vec+))))

(vecplus (make-vec 1 2 3) (make-vec 4 5 6) =&gt; 5 7 9
}}}

Cross product, dot product, and so on can be implemented in the same style.  In Scheme implementations where multiple values are put on the stack, this allows operations on vecs without boxing or unboxing them.</pre>
    <h2>oldvalue</h2>
    <pre>1</pre>
    <h2>raw-time</h2>
    <pre>1287376930000000</pre>
    <h2>ticket</h2>
    <pre>87</pre>
    <h2>time</h2>
    <pre>2010-10-18 11:42:10</pre></body></html>